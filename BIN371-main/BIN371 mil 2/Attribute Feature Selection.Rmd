---
title: "Attribute/ Feature Selection"
output: html_document
date: "2025-08-14"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
library(dplyr)
library(tidyr)
library(readr)
library(ggplot2)
```

## Introduction

This report analyses the datasets provided for BIN371 Project Milestone 2 with the aim of assessing feature usability for modelling and uncovering meaningful health-related patterns. The project investigates the link between healthcare access and maternal and child health outcomes in South Africa, using publicly available national-level data. The overall objective is to provide evidence-based insights that support better decision-making in public health policy and service delivery.

To support these goals, the report evaluates four key datasets: Access to Health Care, Child Mortality, Maternal Mortality, and Immunization. These datasets, which span surveys conducted between 1998 and 2016, include indicators such as place of delivery, type of birth assistance, immunisation rates, and mortality statistics. The CRISP-DM methodology is used as a structured framework for analysis, starting with business understanding and data exploration before moving into modelling and evaluation.
```{}

```

## Load datasets



```{r}
immunization <- read.csv("immunization_national_zaf.csv")
maternal_mortality <- read.csv("maternal-mortality_national_zaf.csv")
access_healthcare <- read.csv("access-to-health-care_national_zaf.csv")
child_mortality <- read.csv("child-mortality-rates_national_zaf.csv")
```

## Finding the Missing Value Analysis



```{r}
missing_percentage <- function(df){
  data.frame(
    Feature = colnames(df),
    MissingPercent = colSums(is.na(df)) / nrow(df) * 100  
  )
}

missing_access <- missing_percentage(access_healthcare) %>% mutate(Dataset = "Access_Healthcare")
missing_maternal <- missing_percentage(maternal_mortality) %>% mutate(Dataset = "Maternal_Mortality")
missing_immunization <- missing_percentage(immunization) %>% mutate(Dataset = "Immunization")
missing_child <- missing_percentage(child_mortality) %>% mutate(Dataset = "Child_Mortality")

missing_summary <- bind_rows(missing_access, missing_maternal, missing_immunization, missing_child)

kable(missing_summary, caption = "Percentage of Missing Values per Feature")
```

## Correlation Analysis



```{r}
target <- "Value"
child_mortality$Value <- as.numeric(as.character(child_mortality$Value))

numeric_data <- child_mortality %>% select(where(is.numeric))
cor_results <- data.frame(
  Feature = colnames(numeric_data),
  CorrelationWithTarget = sapply(numeric_data, function(x){
    if(all(is.na(x)) || sd(x, na.rm = TRUE) == 0) return(NA)
    cor(x, numeric_data[[target]], use = "complete.obs")
  })
)

feature_summary <- left_join(missing_summary, cor_results, by="Feature") %>% mutate(
  Keep = ifelse(MissingPercent > 80 | abs(CorrelationWithTarget) < 0.1, "No", "Yes"),
  Reason = case_when(
    MissingPercent > 80 ~ "Too many missing values",
    abs(CorrelationWithTarget) < 0.1 ~ "Weak correlation",
    TRUE ~ "Relevant"
  )
)

kable(feature_summary, caption = "Feature Usability Summary")

```
## Interpretation of Feature Selection

Based on the missing values analysis and feature correlation with the target variables, we identified and removed features that are either incomplete or irrelevant for modelling. The decisions were guided by two main criteria:

High missingness: Features with over 80% missing data are considered unreliable for analysis and were removed.

Low correlation: Features with correlation below 0.1 with the target variable are unlikely to contribute meaningfully to predictive models and were excluded unless domain knowledge suggested otherwise.

## Key Decisions by Dataset

Access to Healthcare Dataset:

Removed: CILow, CIHigh, RegionId, LevelRank

Reason: These columns had 100% missing values or no meaningful data.

Retained: Features such as IndicatorOrder, CharacteristicId, and IsPreferred showed moderate correlations with the target and were kept.

Maternal Mortality Dataset:

Removed: CILow, CIHigh, RegionId, LevelRank, and DenominatorWeighted

Reason: These fields either had extremely high missingness or weak correlation with maternal mortality indicators.

Retained: Fields like IndicatorOrder, CharacteristicId, and DenominatorUnweighted were preserved due to moderate correlation and potential relevance.

Immunization Dataset:

Removed: CILow, CIHigh, RegionId, and LevelRank

Reason: All had 100% missing values, making them unusable.

Retained: Most other columns had low to moderate missingness and demonstrated relevance to the project's goal of assessing immunization coverage.

Child Mortality Dataset:

Removed: RegionId, LevelRank, DenominatorWeighted, DenominatorUnweighted

Reason: These columns either had missing data exceeding 90% or showed minimal correlation with child mortality outcomes.

Retained: CIHigh and CILow were kept here due to strong correlation values (~0.99), despite higher missingness, indicating they may be useful when available.



Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
